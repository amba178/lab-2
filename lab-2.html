<!DOCTYPE html>
<html>
  <head>
      <title> Event Handler </title>
       <meta charset="UTF-8">
       <script src="https://unpkg.com/react@15/dist/react.min.js"></script>
       <script src="https://unpkg.com/react-dom@15/dist/react-dom.min.js"></script>
       <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css"
         integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
       <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.24.0/babel.js"></script>
  </head>
  <body class="container">
      <div id="root"> </div>
      <script type="text/babel">

      function Question(props){
          var style = {
              color: 'red',
              marginBottom: 20,
              marginLeft: 60
          }
          return(<h1 style= {style}> What is {props.val1} x {props.val2} </h1>)
      }

      function Button(props){
        var style = {
          color: 'blue',
          cursor: 'pointer',
          width: 400,
          height: 50
        }
        return ( <div onClick = { () => props.handleClick(props.val1, props.val2, props.val) }>
                  <button style={style}>{props.val}</button>
                 </div>
                )
        }

      function Shuffle(array) {
         let counter = array.length; 
         while (counter > 0) {
            let index = Math.floor(Math.random() * counter);
            counter--;
            let temp = array[counter];
            array[counter] = array[index];
            array[index] = temp;
        }
        return array;
      }

      function Buttons(props){
        var cells = []
        var val1 = Math.floor(Math.random()*10)
        var val2 = Math.floor(Math.random()*10)
        var val3 = Math.floor(Math.random()*10)
        var val4 = Math.floor(Math.random()*10)
        var val5 = Math.floor(Math.random()*10)
        var arr = Shuffle([props.val1*props.val2, val3*val3,val4*val4, val5*val5])
        console.log(arr)
        for(let i=0; i < 4; i++){
          cells.push(<Button val= {arr[i]} handleClick = {props.handleClick} val1 ={val1} val2={val2}/>)
        }
        return(
          <div>{cells}</div>
        )
      }

      function Correct(props){
        var style = {
          marginTop: 90  
        }
        return <h3 style={style}> Correct: {props.correct} </h3>
      }

      function Incorrect(props){
        var style = {
          marginTop: 100
        }
        return(<h3 style={style}> Incorrect: {props.incorrect} </h3>)
      }

      class Game extends React.Component{
          constructor(props){
            super(props)
            var val1=Math.floor(Math.random()*10) 
            var val2=Math.floor(Math.random()*10)
            this.state = {correct: 0, incorrect: 0, val1:val1  , val2: val2, answer: val1*val2}
            console.log(this.state)
            this.handleClick = this.handleClick.bind(this)

          }

          handleClick(val1, val2, val){
           this.setState({val1: val1, val2: val2, answer: val1*val2}, () => {
           console.log(this.state)
           })
           console.log(this.state.answer==val)
           if(this.state.answer==val){
            this.setState((prevState, props) => {
            return {correct: prevState.correct+1}
            })
           }else{
            this.setState((prevState, props) => {
            return {incorrect: prevState.incorrect+1}
            })}    
           }

          render(){
            return(

              <div className= "row">
                <div className="col-8">
                   <Question  val1 = {this.state.val1} val2={this.state.val2} handleClick ={this.handleClick}/>
                   <Buttons val1={this.state.val1} val2={this.state.val2} answer={this.state.answer} handleClick ={this.handleClick}/>
                </div>
                <div className="col-4">
                   <Correct correct= {this.state.correct} />
                   <Incorrect incorrect= {this.state.incorrect} />
                </div>
              
              </div>
            )
          }

      }

      ReactDOM.render(
        <Game/>,
          document.getElementById('root')
      )
         
      </script>
  
  </body>
</html>