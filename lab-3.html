<!DOCTYPE html>
<html>
  <head>
      <title> Event Handler </title>
       <meta charset="UTF-8">
       <script src="https://unpkg.com/react@15/dist/react.min.js"></script>
       <script src="https://unpkg.com/react-dom@15/dist/react-dom.min.js"></script>
       <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css"
         integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
       <link rel="stylesheet" href="./index.css">
       <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.24.0/babel.js"></script>
  </head>
  <body class="container">
      <div id="root"> </div>
      <script type="text/babel">

      function LabelText(props){
        return <label className={props.for=="checkbox"? "form-check-label" : "" }>{props.label}</label>
      }

      function InputField(props){
        return <input className= {props.type=="checkbox"? "form-check-input" : "form-control"} name={props.name} type = {props.type} value = {props.value}/>
      }

      function SelectField(props){
        var array = ["Science Lab","Swimming","Cooking","Painting"]
        var options = array.map((item) => <option value = {item}> {item} </option>)
        return <select className="form-control" name = {props.name}>{options}</select>
      }

      class App extends React.Component{
        constructor(props){
          super(props)
          this.state = {items: [], checkboxArray: []}
          this.handleChange = this.handleChange.bind(this)
          this.handleSubmit = this.handleSubmit.bind(this)
          
        }

      

        handleSubmit(event){
          let itemsCopy = this.state.items.slice();
          itemsCopy.push({"firstName": this.state.firstName, "lastName": this.state.lastName, "selectName": this.state.selectName, "checkboxName": this.state.checkboxArray})
          this.setState({items: itemsCopy}, () => console.log(itemsCopy))
          this.setState({firstName: "", lastName: "", "selectName": ""})
          event.preventDefault()
        }

        handleChange(event){
            const target = event.target; 
            const value = target.type === 'checkbox' ? target.checked : target.value;
            const name = target.name; 
            if(target.checked){
                this.state.checkboxArray.push(target.name)
            }else{
                let index = this.state.checkboxArray.indexOf(target.name)
                this.setState({checkboxArray: this.state.checkboxArray.splice(index, 1)})
            }

            this.setState( {[name]: value }, () => console.log(this.state))
        }

        render(){
                  var array = ["Science Lab","Swimming","Cooking","Painting"]
                  var options = array.map((item) => <option value = {item}> {item} </option>)
          return (
                 <form className="col-4" onSubmit = {this.handleSubmit}>
                  
                    <div className="form-group"> 
                     <LabelText for="text" label="First Name"/>
                     <input className ="form-control" name = "firstName" type ="text" value = {this.state.firstName} onChange = {this.handleChange}/>
                    </div>

                    <div className="form-group"> 
                      <LabelText for = "text" label="Last Name"/>
                      <input className ="form-control"  name = "lastName" type ="text" value = {this.state.lastName} onChange = {this.handleChange}/>
                    </div>

                    <div className="form-group"> 
                      <LabelText for = "select" label="Select Activities"/>
                      <select className ="form-control" name="selectName" value = {this.state.selectName} onChange = {this.handleChange}> {options}</select>
                    </div>
                    <div>

                    <LabelText for = "" label="Check all that apply:"/>
                    </div>
                    <div className="form-check"> 
                      <input classNamae = "form-check-input" name = "a" type ="checkbox" value = {this.state.checkboxNameA} onChange = {this.handleChange}/>
                      <LabelText for="checkbox" label="a) Dietary Restrictions"/>
                    </div>

                    <div className="form-check"> 
                      <input classNamae = "form-check-input" name = "b" type ="checkbox" value = {this.state.checkboxNameB} onChange = {this.handleChange}/>
                      <LabelText for="checkbox" label="b) Physical Disablities"/>
                    </div>

                    <div className="form-check"> 
                      <input classNamae = "form-check-input" name = "c" type ="checkbox" value = {this.state.checkboxNameC} onChange = {this.handleChange}/>
                      <LabelText for="checkbox" label="c) Medical Needs"/>
                    </div>
                    <div>
                      <button className="btn btn-primary btn-block">Submit</button>
                    </div>

                  </form>

                 )
        }
      }

     
      ReactDOM.render(<App/>,document.getElementById('root'))
         
      </script>
  
  </body>
</html>